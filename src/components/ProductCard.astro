---
import type { Product } from "../lib/directus";

interface Props {
    product: Product;
}

const { product } = Astro.props;
const {
    id,
    product_name,
    product_price,
    product_image,
    product_brand,
    product_category,
} = product;
const defaultImage = "/images/product-placeholder.jpg";

const handleImageError = `this.onerror=null; this.src='${defaultImage}'`;
---

<article class="mb-6 flex flex-col overflow-hidden">
    <div class="px-1">
        <div class="flex justify-between">
            <span class="text-sm text-gray-600 uppercase">
                {product_category.category_name}
            </span>
            <span class="text-sm text-gray-600 uppercase">
                {product_brand.brand_name}
            </span>
        </div>
    </div>
    <div
        class="mb-2 bg-white border relative aspect-square overflow-hidden hover:shadow-sm transition-shadow duration-300"
    >
        <img
            src={`https://baresk-skin.es/assets/${product_image}`}
            alt={product_name}
            class="w-full h-full object-cover object-center transform group-hover:scale-105 transition-transform duration-300"
        />
        <div
            class="flex justify-between items-center absolute bottom-2 right-2"
        >
            <span class="text-sm font-normal">{product_price}â‚¬</span>
        </div>
        <button
            class="w-1/3 absolute bottom-2 left-2 border hover:bg-skin-accent/20 transition-colors"
        >
            <a
                href={`/catalog/products/${id}`}
                class="block py-2 text-sm text-center font-normal">+Info</a
            >
        </button>
    </div>
    <div class="px-1 mb-2 flex-grow">
        <h3 class="text-sm font-semibold text-skin-dark">{product_name}</h3>
    </div>
</article>
